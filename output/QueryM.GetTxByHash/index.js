// Generated by purs version 0.14.5
"use strict";
var Base64 = require("../Base64/index.js");
var Control_Applicative = require("../Control.Applicative/index.js");
var Control_Bind = require("../Control.Bind/index.js");
var Data_Either = require("../Data.Either/index.js");
var Data_Functor = require("../Data.Functor/index.js");
var Data_Maybe = require("../Data.Maybe/index.js");
var Data_Newtype = require("../Data.Newtype/index.js");
var Deserialization_Transaction = require("../Deserialization.Transaction/index.js");
var Effect_Aff = require("../Effect.Aff/index.js");
var Effect_Class = require("../Effect.Class/index.js");
var Effect_Exception = require("../Effect.Exception/index.js");
var QueryM = require("../QueryM/index.js");
var QueryM_DatumCacheWsp = require("../QueryM.DatumCacheWsp/index.js");
var Types_CborBytes = require("../Types.CborBytes/index.js");
var getTxByHash = function (txHash) {
    return Control_Bind.bind(QueryM.bindQueryMExtended(Effect_Aff.bindAff))(Data_Functor.map(QueryM.functorQueryMExtended(Effect_Aff.functorAff))(Data_Newtype.unwrap())(QueryM.mkDatumCacheRequest(QueryM_DatumCacheWsp.getTxByHash)(function (v) {
        return v.getTxByHash;
    })(txHash)))(Data_Maybe.maybe(Control_Applicative.pure(QueryM.applicativeQueryMExtended(Effect_Aff.applicativeAff))(Data_Maybe.Nothing.value))(function (txBase64) {
        var txBytes = Types_CborBytes.CborBytes(Base64.toByteArray(txBase64));
        return Data_Maybe.maybe(Effect_Class.liftEffect(QueryM.monadEffectQueryMExtended)(Effect_Exception["throw"]("Unable to decode transaction")))((function () {
            var $1 = Control_Applicative.pure(QueryM.applicativeQueryMExtended(Effect_Aff.applicativeAff));
            return function ($2) {
                return $1(Data_Maybe.Just.create($2));
            };
        })())(Data_Either.hush(Deserialization_Transaction.deserializeTransaction(txBytes)));
    }));
};
module.exports = {
    getTxByHash: getTxByHash
};
