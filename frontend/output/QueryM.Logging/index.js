// Generated by purs version 0.14.5
"use strict";
var Data_Foldable = require("../Data.Foldable/index.js");
var Data_Functor = require("../Data.Functor/index.js");
var Data_List = require("../Data.List/index.js");
var Data_List_Types = require("../Data.List.Types/index.js");
var Data_Maybe = require("../Data.Maybe/index.js");
var Effect = require("../Effect/index.js");
var Effect_Aff = require("../Effect.Aff/index.js");
var Effect_Class = require("../Effect.Class/index.js");
var Effect_Ref = require("../Effect.Ref/index.js");
var QueryM = require("../QueryM/index.js");
var setupLogs = function (logLevel) {
    return function (customLogger) {
        return function __do() {
            var logsRef = Effect_Class.liftEffect(Effect_Class.monadEffectEffect)(Effect_Ref["new"](Data_List_Types.Nil.value))();
            var logger = QueryM.mkLogger(logLevel)(customLogger);
            var printLogs = function __do() {
                var logs = Data_Functor.map(Effect.functorEffect)(Data_List.reverse)(Effect_Ref.read(logsRef))();
                Effect_Ref.write(Data_List_Types.Nil.value)(logsRef)();
                return Data_Foldable.for_(Effect.applicativeEffect)(Data_List_Types.foldableList)(logs)(function (logEntry) {
                    return logger(logEntry.level)(logEntry.message);
                })();
            };
            var addLogEntry = function (msg) {
                return Effect_Ref.modify_(Data_List_Types.Cons.create(msg))(logsRef);
            };
            var suppressedLogger = QueryM.mkLogger(logLevel)(Data_Maybe.Just.create((function () {
                var $0 = Effect_Class.liftEffect(Effect_Aff.monadEffectAff);
                return function ($1) {
                    return $0(addLogEntry($1));
                };
            })()));
            return {
                addLogEntry: addLogEntry,
                logger: logger,
                printLogs: printLogs,
                suppressedLogger: suppressedLogger
            };
        };
    };
};
module.exports = {
    setupLogs: setupLogs
};
